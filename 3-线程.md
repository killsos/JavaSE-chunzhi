## 线程

#### 3.1线程的概念
	
3.1.1 进程 是一个正在执行中程序 
	
		每个进程执行都有一个执行顺序  该顺序是一个执行路径 或者叫一个控制单元
	
	线程 还称为 控制单元  执行路径 执行情景
	
		线程就是进程中的一个独立控制单元 线程在控制着进程的执行
	
	
	一个进程中至少一个线程
	
	JAVA VM 虚拟机 启动的时候会有一个进程java.exe
	
	该进程中至少一个线程负责java程序的执行  而却这个线程运行的代码存在于main方法中的

	该线程称之为主线程
	
	还有一个负责垃圾回收的线程 GCC线程 

3.1.2 多线程意义
	
	进程 和 线程 都是调用系统API创建的


#### 3.2 Thread 类

3.2.1 创建线程
	
	1. 将类声明为Thread的子类  重写run方法  start方法完成两个功能 启动线程  调用run方法
	
	2. 声明实现Runnable接口 实现run方法 然后该类的实例 作为创建Thread时的参数来传递并启动
	
	两者区别:
		
		实现方式好处 避免了单继承的局限性
		
		在定义线程时 建立使用实现方式
		
		继承Thread 线程代码存放Thread子类run方法中
		
		实现runnable  线程代码存放接口的子类run方法中
		
3.2.2 为何每次运行结果不同?

	因为多个线程都获取CPU的执行权 CPU执行到谁 谁就运行
	
	明确一点 在某一个时刻 只能有一个程序在运行 也就是只能有一个进程在运行  更是只能有一个线程在运行 (多核除外)
	
	CPU在做着快速的切换  以达到看上去是同时运行的效果
	
	我们可以形象把多线程的运行行为在互相抢夺CPU的执行权
	
	这就是多线程的一个特性: 随机性  谁抢到谁执行  至于执行时长 CPU说了算
	
3.2.3 为何覆盖run方法

	Thread类用于描述线程
	
	该类就定义了一个功能 用于存储线程要执行的代码  该存储功能就是run方法
	
	也就是说Thread类中的run方法 用于存储线程要执行的代码
	
3.2.4 线程状态


						
						阻塞 （具备运行资格  但没有执行权）
						

	 					sleep/wait
	 创建       运行							冻结 
	 					notify
						
						
				消亡
				

3.2.5  线程名称
	
	线程都有默认的名称  Thread-0开始
	
	Thread(String)    构造函数
	
	Thread.currentThread()  返回当前线程
	

3.2.6 线程安全
	
	产生原因
		
		当多条语句在操作同一个线程共享数据时 一个线程对多条语句只执行了一部分 还没有执行完
		
		另一个线程参与进来执行 导致共享数据的错误
		
	解决办法
		
		对多条操作共享数据的语句 只能让一个线程都执行完 在执行过程中 其他线程不可以参与执行
		
		JAVA对于多线程的安全问题提供了专业的解决方法
		
		就是同步代码块  synchronized 关键字  锁  
		
		synchronized (Object p) {
		
		}
		
		同步前提:
			
			1. 必须要有两个或者两个以上线程
			
			2. 必须是多个线程使用同一个锁
			
		必须保证同步中只能有一个线程运行
		
		好处
			
			解决了多线的安全
		
		弊端
			
			消耗了资源 每次都要判断锁
		
	如何找出多线程同步问题步骤:
	
		1. 明确哪些代码是多线程运行代码
		
		2. 明确共享数据
		
		3. 明确多线程运行代码中哪些语句是操作共享数据的
		
		
		
	